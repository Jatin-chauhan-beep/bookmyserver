let express = require("express");
let app = express();
app.use(express.json());
app.use(function (req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header(
    "Access-Control-Allow-Methods",
    "GET, POST, OPTIONS, PUT, PATCH, DELETE, HEAD"
  );
  res.header(
    "Access-Control-Allow-Headers",
    "Origin, X-Requested-With, Content-Type, Accept"
  );
  next();
});
const theater = [
  {
    theater_name: "ABC Cinemas",
    timings: ["10:00 AM", "1:00 PM"],
  },
];

let seats1 = [
  {
    time: "10:00 AM",
    A: [
      { name: "A1", value: 1, price: 420 },
      { name: "A2", value: 0, price: 420 },
      { name: "A3", value: 0, price: 420 },
      { name: "A4", value: 0, price: 420 },
      { name: "A5", value: 1, price: 420 },
      { name: "A6", value: 0, price: 420 },
      { name: "A7", value: 1, price: 420 },
      { name: "A8", value: 0, price: 420 },
      { name: "A9", value: 0, price: 420 },
      { name: "A10", value: 1, price: 420 },
      { name: "A11", value: 0, price: 420 },
      { name: "A12", value: 0, price: 420 },
      { name: "A13", value: 0, price: 420 },
      { name: "A14", value: 0, price: 420 },
      { name: "A15", value: 0, price: 420 },
    ],
    B: [
      { name: "B1", value: 0, price: 420 },
      { name: "B2", value: 0, price: 420 },
      { name: "B3", value: 0, price: 420 },
      { name: "B4", value: 0, price: 420 },
      { name: "B5", value: 0, price: 420 },
      { name: "B6", value: 0, price: 420 },
      { name: "B7", value: 0, price: 420 },
      { name: "B8", value: 0, price: 420 },
      { name: "B9", value: 0, price: 420 },
      { name: "B10", value: 0, price: 420 },
      { name: "B11", value: 0, price: 420 },
      { name: "B12", value: 0, price: 420 },
      { name: "B13", value: 0, price: 420 },
      { name: "B14", value: 0, price: 420 },
      { name: "B15", value: 0, price: 420 },
    ],
    C: [
      { name: "C1", value: 0, price: 250 },
      { name: "C2", value: 0, price: 250 },
      { name: "C3", value: 0, price: 250 },
      { name: "C4", value: 0, price: 250 },
      { name: "C5", value: 1, price: 250 },
      { name: "C6", value: 0, price: 250 },
      { name: "C7", value: 0, price: 250 },
      { name: "C8", value: 0, price: 250 },
      { name: "C9", value: 0, price: 250 },
      { name: "C10", value: 0, price: 250 },
      { name: "C11", value: 0, price: 250 },
      { name: "C12", value: 0, price: 250 },
      { name: "C13", value: 0, price: 250 },
      { name: "C14", value: 0, price: 250 },
      { name: "C15", value: 0, price: 250 },
      { name: "C16", value: 0, price: 250 },
      { name: "C17", value: 0, price: 250 },
      { name: "C18", value: 0, price: 250 },
      { name: "C19", value: 0, price: 250 },
      { name: "C20", value: 0, price: 250 },
      { name: "C21", value: 0, price: 250 },
      { name: "C22", value: 0, price: 250 },
      { name: "C23", value: 0, price: 250 },
      { name: "C24", value: 0, price: 250 },
    ],
    D: [
      { name: "D1", value: 0, price: 250 },
      { name: "D2", value: 0, price: 250 },
      { name: "D3", value: 0, price: 250 },
      { name: "D4", value: 0, price: 250 },
      { name: "D5", value: 0, price: 250 },
      { name: "D6", value: 0, price: 250 },
      { name: "D7", value: 0, price: 250 },
      { name: "D8", value: 0, price: 250 },
      { name: "D9", value: 0, price: 250 },
      { name: "D10", value: 0, price: 250 },
      { name: "D11", value: 1, price: 250 },
      { name: "D12", value: 0, price: 250 },
      { name: "D13", value: 0, price: 250 },
      { name: "D14", value: 0, price: 250 },
      { name: "D15", value: 0, price: 250 },
      { name: "D16", value: 0, price: 250 },
      { name: "D17", value: 0, price: 250 },
      { name: "D18", value: 0, price: 250 },
      { name: "D19", value: 0, price: 250 },
      { name: "D20", value: 0, price: 250 },
      { name: "D21", value: 0, price: 250 },
      { name: "D22", value: 0, price: 250 },
      { name: "D23", value: 0, price: 250 },
      { name: "D24", value: 0, price: 250 },
    ],
    E: [
      { name: "E1", value: 0, price: 250 },
      { name: "E2", value: 0, price: 250 },
      { name: "E3", value: 0, price: 250 },
      { name: "E4", value: 0, price: 250 },
      { name: "E5", value: 0, price: 250 },
      { name: "E6", value: 0, price: 250 },
      { name: "E7", value: 1, price: 250 },
      { name: "E8", value: 0, price: 250 },
      { name: "E9", value: 0, price: 250 },
      { name: "E10", value: 0, price: 250 },
      { name: "E11", value: 0, price: 250 },
      { name: "E12", value: 0, price: 250 },
      { name: "E13", value: 0, price: 250 },
      { name: "E14", value: 0, price: 250 },
      { name: "E15", value: 0, price: 250 },
      { name: "E16", value: 0, price: 250 },
      { name: "E17", value: 0, price: 250 },
      { name: "E18", value: 0, price: 250 },
      { name: "E19", value: 0, price: 250 },
      { name: "E20", value: 0, price: 250 },
      { name: "E21", value: 0, price: 250 },
      { name: "E22", value: 0, price: 250 },
      { name: "E23", value: 0, price: 250 },
      { name: "E24", value: 0, price: 250 },
    ],
    F: [
      { name: "F1", value: 0, price: 250 },
      { name: "F2", value: 0, price: 250 },
      { name: "F3", value: 0, price: 250 },
      { name: "F4", value: 0, price: 250 },
      { name: "F5", value: 0, price: 250 },
      { name: "F6", value: 0, price: 250 },
      { name: "F7", value: 0, price: 250 },
      { name: "F8", value: 0, price: 250 },
      { name: "F9", value: 0, price: 250 },
      { name: "F10", value: 1, price: 250 },
      { name: "F11", value: 0, price: 250 },
      { name: "F12", value: 0, price: 250 },
      { name: "F13", value: 0, price: 250 },
      { name: "F14", value: 0, price: 250 },
      { name: "F15", value: 0, price: 250 },
      { name: "F16", value: 0, price: 250 },
      { name: "F17", value: 0, price: 250 },
      { name: "F18", value: 0, price: 250 },
      { name: "F19", value: 0, price: 250 },
      { name: "F20", value: 0, price: 250 },
    ],
    G: [
      { name: "G1", value: 0, price: 250 },
      { name: "G2", value: 0, price: 250 },
      { name: "G3", value: 0, price: 250 },
      { name: "G4", value: 0, price: 250 },
      { name: "G5", value: 0, price: 250 },
      { name: "G6", value: 0, price: 250 },
      { name: "G7", value: 0, price: 250 },
      { name: "G8", value: 0, price: 250 },
      { name: "G9", value: 0, price: 250 },
      { name: "G10", value: 0, price: 250 },
      { name: "G11", value: 0, price: 250 },
      { name: "G12", value: 0, price: 250 },
      { name: "G13", value: 0, price: 250 },
      { name: "G14", value: 0, price: 250 },
      { name: "G15", value: 0, price: 250 },
      { name: "G16", value: 0, price: 250 },
      { name: "G17", value: 0, price: 250 },
      { name: "G18", value: 0, price: 250 },
      { name: "G19", value: 0, price: 250 },
      { name: "G20", value: 0, price: 250 },
      { name: "G21", value: 0, price: 250 },
      { name: "G22", value: 0, price: 250 },
      { name: "G23", value: 0, price: 250 },
      { name: "G24", value: 0, price: 250 },
    ],
    H: [
      { name: "H1", value: 0, price: 250 },
      { name: "H2", value: 0, price: 250 },
      { name: "H3", value: 0, price: 250 },
      { name: "H4", value: 0, price: 250 },
      { name: "H5", value: 0, price: 250 },
      { name: "H6", value: 0, price: 250 },
      { name: "H7", value: 0, price: 250 },
      { name: "H8", value: 0, price: 250 },
      { name: "H9", value: 0, price: 250 },
      { name: "H10", value: 0, price: 250 },
      { name: "H11", value: 0, price: 250 },
      { name: "H12", value: 0, price: 250 },
      { name: "H13", value: 0, price: 250 },
      { name: "H14", value: 0, price: 250 },
      { name: "H15", value: 0, price: 250 },
      { name: "H16", value: 0, price: 250 },
      { name: "H17", value: 0, price: 250 },
      { name: "H18", value: 0, price: 250 },
      { name: "H19", value: 0, price: 250 },
      { name: "H20", value: 0, price: 250 },
      { name: "H21", value: 0, price: 250 },
      { name: "H22", value: 0, price: 250 },
      { name: "H23", value: 0, price: 250 },
      { name: "H24", value: 0, price: 250 },
    ],
    I: [
      { name: "I1", value: 0, price: 250 },
      { name: "I2", value: 0, price: 250 },
      { name: "I3", value: 0, price: 250 },
      { name: "I4", value: 0, price: 250 },
      { name: "I5", value: 0, price: 250 },
      { name: "I6", value: 0, price: 250 },
      { name: "I7", value: 0, price: 250 },
      { name: "I8", value: 0, price: 250 },
      { name: "I9", value: 0, price: 250 },
      { name: "I10", value: 0, price: 250 },
      { name: "I11", value: 0, price: 250 },
      { name: "I12", value: 0, price: 250 },
      { name: "I13", value: 0, price: 250 },
      { name: "I14", value: 0, price: 250 },
      { name: "I15", value: 0, price: 250 },
      { name: "I16", value: 0, price: 250 },
      { name: "I17", value: 0, price: 250 },
      { name: "I18", value: 0, price: 250 },
      { name: "I19", value: 0, price: 250 },
      { name: "I20", value: 0, price: 250 },
      { name: "I21", value: 0, price: 250 },
      { name: "I22", value: 0, price: 250 },
      { name: "I23", value: 0, price: 250 },
      { name: "I24", value: 0, price: 250 },
    ],
    J: [
      { name: "J1", value: 0, price: 250 },
      { name: "J2", value: 0, price: 250 },
      { name: "J3", value: 0, price: 250 },
      { name: "J4", value: 0, price: 250 },
      { name: "J5", value: 0, price: 250 },
      { name: "J6", value: 0, price: 250 },
      { name: "J7", value: 0, price: 250 },
      { name: "J8", value: 0, price: 250 },
      { name: "J9", value: 0, price: 250 },
      { name: "J10", value: 0, price: 250 },
      { name: "J11", value: 0, price: 250 },
      { name: "J12", value: 1, price: 250 },
      { name: "J13", value: 0, price: 250 },
      { name: "J14", value: 0, price: 250 },
      { name: "J15", value: 0, price: 250 },
      { name: "J16", value: 0, price: 250 },
      { name: "J17", value: 0, price: 250 },
      { name: "J18", value: 0, price: 250 },
      { name: "J19", value: 0, price: 250 },
      { name: "J20", value: 0, price: 250 },
      { name: "J21", value: 0, price: 250 },
      { name: "J22", value: 0, price: 250 },
      { name: "J23", value: 0, price: 250 },
      { name: "J24", value: 0, price: 250 },
    ],
    K: [
      { name: "K1", value: 0, price: 250 },
      { name: "K2", value: 0, price: 250 },
      { name: "K3", value: 0, price: 250 },
      { name: "K4", value: 0, price: 250 },
      { name: "K5", value: 0, price: 250 },
      { name: "K6", value: 0, price: 250 },
      { name: "K7", value: 0, price: 250 },
      { name: "K8", value: 0, price: 250 },
      { name: "K9", value: 0, price: 250 },
      { name: "K10", value: 0, price: 250 },
      { name: "K11", value: 0, price: 250 },
      { name: "K12", value: 0, price: 250 },
      { name: "K13", value: 0, price: 250 },
      { name: "K14", value: 0, price: 250 },
      { name: "K15", value: 0, price: 250 },
      { name: "K16", value: 0, price: 250 },
      { name: "K17", value: 0, price: 250 },
      { name: "K18", value: 0, price: 250 },
      { name: "K19", value: 0, price: 250 },
      { name: "K20", value: 0, price: 250 },
    ],
    L: [
      { name: "L1", value: 0 },
      { name: "L2", value: 0 },
      { name: "L3", value: 0 },
      { name: "L4", value: 0 },
      { name: "L5", value: 0 },
      { name: "L6", value: 0 },
      { name: "L7", value: 0 },
      { name: "L8", value: 0 },
      { name: "L9", value: 0 },
      { name: "L10", value: 0 },
      { name: "L11", value: 0 },
      { name: "L12", value: 0 },
      { name: "L13", value: 0 },
      { name: "L14", value: 0 },
      { name: "L15", value: 0 },
      { name: "L16", value: 0 },
      { name: "L17", value: 0 },
      { name: "L18", value: 0 },
      { name: "L19", value: 0 },
      { name: "L20", value: 0 },
    ],
    M: [
      { name: "M1", value: 0 },
      { name: "M2", value: 0 },
      { name: "M3", value: 0 },
      { name: "M4", value: 0 },
      { name: "M5", value: 0 },
      { name: "M6", value: 0 },
      { name: "M7", value: 0 },
      { name: "M8", value: 0 },
      { name: "M9", value: 0 },
      { name: "M10", value: 0 },
      { name: "M11", value: 0 },
      { name: "M12", value: 0 },
      { name: "M13", value: 0 },
      { name: "M14", value: 0 },
      { name: "M15", value: 0 },
      { name: "M16", value: 0 },
      { name: "M17", value: 0 },
      { name: "M18", value: 0 },
      { name: "M19", value: 0 },
      { name: "M20", value: 0 },
    ],
    N: [
      { name: "N1", value: 0 },
      { name: "N2", value: 0 },
      { name: "N3", value: 0 },
      { name: "N4", value: 0 },
      { name: "N5", value: 0 },
      { name: "N6", value: 0 },
      { name: "N7", value: 0 },
      { name: "N8", value: 0 },
      { name: "N9", value: 0 },
      { name: "N10", value: 0 },
      { name: "N11", value: 0 },
      { name: "N12", value: 0 },
      { name: "N13", value: 0 },
      { name: "N14", value: 0 },
      { name: "N15", value: 0 },
      { name: "N16", value: 0 },
      { name: "N17", value: 0 },
      { name: "N18", value: 0 },
      { name: "N19", value: 0 },
      { name: "N20", value: 0 },
    ],
    O: [
      { name: "O1", value: 0 },
      { name: "O2", value: 0 },
      { name: "O3", value: 0 },
      { name: "O4", value: 0 },
      { name: "O5", value: 0 },
      { name: "O6", value: 0 },
      { name: "O7", value: 0 },
      { name: "O8", value: 0 },
      { name: "O9", value: 0 },
      { name: "O10", value: 0 },
      { name: "O11", value: 0 },
      { name: "O12", value: 0 },
      { name: "O13", value: 0 },
      { name: "O14", value: 0 },
      { name: "O15", value: 0 },
      { name: "O16", value: 0 },
      { name: "O17", value: 0 },
      { name: "O18", value: 0 },
      { name: "O19", value: 0 },
      { name: "O20", value: 0 },
    ],
  },
  {
    time: "1:00 PM",
    A: [
      { name: "A1", value: 1, price: 420 },
      { name: "A2", value: 0, price: 420 },
      { name: "A3", value: 0, price: 420 },
      { name: "A4", value: 0, price: 420 },
      { name: "A5", value: 1, price: 420 },
      { name: "A6", value: 0, price: 420 },
      { name: "A7", value: 1, price: 420 },
      { name: "A8", value: 0, price: 420 },
      { name: "A9", value: 0, price: 420 },
      { name: "A10", value: 1, price: 420 },
      { name: "A11", value: 0, price: 420 },
      { name: "A12", value: 0, price: 420 },
      { name: "A13", value: 0, price: 420 },
      { name: "A14", value: 0, price: 420 },
      { name: "A15", value: 0, price: 420 },
    ],
    B: [
      { name: "B1", value: 0, price: 420 },
      { name: "B2", value: 0, price: 420 },
      { name: "B3", value: 0, price: 420 },
      { name: "B4", value: 0, price: 420 },
      { name: "B5", value: 1, price: 420 },
      { name: "B6", value: 0, price: 420 },
      { name: "B7", value: 0, price: 420 },
      { name: "B8", value: 1, price: 420 },
      { name: "B9", value: 0, price: 420 },
      { name: "B10", value: 0, price: 420 },
      { name: "B11", value: 1, price: 420 },
      { name: "B12", value: 0, price: 420 },
      { name: "B13", value: 0, price: 420 },
      { name: "B14", value: 0, price: 420 },
      { name: "B15", value: 0, price: 420 },
    ],
    C: [
      { name: "C1", value: 0, price: 250 },
      { name: "C2", value: 0, price: 250 },
      { name: "C3", value: 0, price: 250 },
      { name: "C4", value: 0, price: 250 },
      { name: "C5", value: 1, price: 250 },
      { name: "C6", value: 0, price: 250 },
      { name: "C7", value: 0, price: 250 },
      { name: "C8", value: 1, price: 250 },
      { name: "C9", value: 0, price: 250 },
      { name: "C10", value: 0, price: 250 },
      { name: "C11", value: 0, price: 250 },
      { name: "C12", value: 0, price: 250 },
      { name: "C13", value: 0, price: 250 },
      { name: "C14", value: 1, price: 250 },
      { name: "C15", value: 1, price: 250 },
      { name: "C16", value: 1, price: 250 },
      { name: "C17", value: 0, price: 250 },
      { name: "C18", value: 0, price: 250 },
      { name: "C19", value: 0, price: 250 },
      { name: "C20", value: 1, price: 250 },
      { name: "C21", value: 0, price: 250 },
      { name: "C22", value: 1, price: 250 },
      { name: "C23", value: 0, price: 250 },
      { name: "C24", value: 1, price: 250 },
    ],
    D: [
      { name: "D1", value: 0, price: 250 },
      { name: "D2", value: 0, price: 250 },
      { name: "D3", value: 0, price: 250 },
      { name: "D4", value: 1, price: 250 },
      { name: "D5", value: 1, price: 250 },
      { name: "D6", value: 1, price: 250 },
      { name: "D7", value: 1, price: 250 },
      { name: "D8", value: 0, price: 250 },
      { name: "D9", value: 1, price: 250 },
      { name: "D10", value: 1, price: 250 },
      { name: "D11", value: 1, price: 250 },
      { name: "D12", value: 0, price: 250 },
      { name: "D13", value: 0, price: 250 },
      { name: "D14", value: 0, price: 250 },
      { name: "D15", value: 0, price: 250 },
      { name: "D16", value: 0, price: 250 },
      { name: "D17", value: 0, price: 250 },
      { name: "D18", value: 0, price: 250 },
      { name: "D19", value: 0, price: 250 },
      { name: "D20", value: 0, price: 250 },
      { name: "D21", value: 0, price: 250 },
      { name: "D22", value: 0, price: 250 },
      { name: "D23", value: 1, price: 250 },
      { name: "D24", value: 1, price: 250 },
    ],
    E: [
      { name: "E1", value: 0, price: 250 },
      { name: "E2", value: 0, price: 250 },
      { name: "E3", value: 1, price: 250 },
      { name: "E4", value: 1, price: 250 },
      { name: "E5", value: 0, price: 250 },
      { name: "E6", value: 0, price: 250 },
      { name: "E7", value: 1, price: 250 },
      { name: "E8", value: 1, price: 250 },
      { name: "E9", value: 0, price: 250 },
      { name: "E10", value: 0, price: 250 },
      { name: "E11", value: 0, price: 250 },
      { name: "E12", value: 0, price: 250 },
      { name: "E13", value: 0, price: 250 },
      { name: "E14", value: 1, price: 250 },
      { name: "E15", value: 1, price: 250 },
      { name: "E16", value: 0, price: 250 },
      { name: "E17", value: 1, price: 250 },
      { name: "E18", value: 0, price: 250 },
      { name: "E19", value: 0, price: 250 },
      { name: "E20", value: 0, price: 250 },
      { name: "E21", value: 1, price: 250 },
      { name: "E22", value: 0, price: 250 },
      { name: "E23", value: 0, price: 250 },
      { name: "E24", value: 1, price: 250 },
    ],
    F: [
      { name: "F1", value: 0, price: 250 },
      { name: "F2", value: 1, price: 250 },
      { name: "F3", value: 1, price: 250 },
      { name: "F4", value: 0, price: 250 },
      { name: "F5", value: 1, price: 250 },
      { name: "F6", value: 0, price: 250 },
      { name: "F7", value: 1, price: 250 },
      { name: "F8", value: 1, price: 250 },
      { name: "F9", value: 0, price: 250 },
      { name: "F10", value: 1, price: 250 },
      { name: "F11", value: 0, price: 250 },
      { name: "F12", value: 0, price: 250 },
      { name: "F13", value: 0, price: 250 },
      { name: "F14", value: 0, price: 250 },
      { name: "F15", value: 0, price: 250 },
      { name: "F16", value: 1, price: 250 },
      { name: "F17", value: 0, price: 250 },
      { name: "F18", value: 0, price: 250 },
      { name: "F19", value: 1, price: 250 },
      { name: "F20", value: 0, price: 250 },
    ],
    G: [
      { name: "G1", value: 0, price: 250 },
      { name: "G2", value: 1, price: 250 },
      { name: "G3", value: 0, price: 250 },
      { name: "G4", value: 0, price: 250 },
      { name: "G5", value: 1, price: 250 },
      { name: "G6", value: 0, price: 250 },
      { name: "G7", value: 0, price: 250 },
      { name: "G8", value: 0, price: 250 },
      { name: "G9", value: 1, price: 250 },
      { name: "G10", value: 0, price: 250 },
      { name: "G11", value: 0, price: 250 },
      { name: "G12", value: 0, price: 250 },
      { name: "G13", value: 1, price: 250 },
      { name: "G14", value: 0, price: 250 },
      { name: "G15", value: 0, price: 250 },
      { name: "G16", value: 0, price: 250 },
      { name: "G17", value: 0, price: 250 },
      { name: "G18", value: 0, price: 250 },
      { name: "G19", value: 0, price: 250 },
      { name: "G20", value: 0, price: 250 },
      { name: "G21", value: 0, price: 250 },
      { name: "G22", value: 1, price: 250 },
      { name: "G23", value: 0, price: 250 },
      { name: "G24", value: 0, price: 250 },
    ],
    H: [
      { name: "H1", value: 0, price: 250 },
      { name: "H2", value: 0, price: 250 },
      { name: "H3", value: 1, price: 250 },
      { name: "H4", value: 0, price: 250 },
      { name: "H5", value: 0, price: 250 },
      { name: "H6", value: 1, price: 250 },
      { name: "H7", value: 0, price: 250 },
      { name: "H8", value: 1, price: 250 },
      { name: "H9", value: 1, price: 250 },
      { name: "H10", value: 0, price: 250 },
      { name: "H11", value: 0, price: 250 },
      { name: "H12", value: 0, price: 250 },
      { name: "H13", value: 0, price: 250 },
      { name: "H14", value: 0, price: 250 },
      { name: "H15", value: 0, price: 250 },
      { name: "H16", value: 0, price: 250 },
      { name: "H17", value: 0, price: 250 },
      { name: "H18", value: 0, price: 250 },
      { name: "H19", value: 0, price: 250 },
      { name: "H20", value: 0, price: 250 },
      { name: "H21", value: 0, price: 250 },
      { name: "H22", value: 0, price: 250 },
      { name: "H23", value: 1, price: 250 },
      { name: "H24", value: 1, price: 250 },
    ],
    I: [
      { name: "I1", value: 1, price: 250 },
      { name: "I2", value: 1, price: 250 },
      { name: "I3", value: 0, price: 250 },
      { name: "I4", value: 0, price: 250 },
      { name: "I5", value: 0, price: 250 },
      { name: "I6", value: 1, price: 250 },
      { name: "I7", value: 1, price: 250 },
      { name: "I8", value: 1, price: 250 },
      { name: "I9", value: 1, price: 250 },
      { name: "I10", value: 0, price: 250 },
      { name: "I11", value: 0, price: 250 },
      { name: "I12", value: 0, price: 250 },
      { name: "I13", value: 0, price: 250 },
      { name: "I14", value: 0, price: 250 },
      { name: "I15", value: 0, price: 250 },
      { name: "I16", value: 0, price: 250 },
      { name: "I17", value: 1, price: 250 },
      { name: "I18", value: 0, price: 250 },
      { name: "I19", value: 1, price: 250 },
      { name: "I20", value: 0, price: 250 },
      { name: "I21", value: 1, price: 250 },
      { name: "I22", value: 0, price: 250 },
      { name: "I23", value: 0, price: 250 },
      { name: "I24", value: 0, price: 250 },
    ],
    J: [
      { name: "J1", value: 0, price: 250 },
      { name: "J2", value: 0, price: 250 },
      { name: "J3", value: 0, price: 250 },
      { name: "J4", value: 0, price: 250 },
      { name: "J5", value: 1, price: 250 },
      { name: "J6", value: 0, price: 250 },
      { name: "J7", value: 1, price: 250 },
      { name: "J8", value: 0, price: 250 },
      { name: "J9", value: 0, price: 250 },
      { name: "J10", value: 1, price: 250 },
      { name: "J11", value: 0, price: 250 },
      { name: "J12", value: 1, price: 250 },
      { name: "J13", value: 0, price: 250 },
      { name: "J14", value: 0, price: 250 },
      { name: "J15", value: 0, price: 250 },
      { name: "J16", value: 0, price: 250 },
      { name: "J17", value: 0, price: 250 },
      { name: "J18", value: 0, price: 250 },
      { name: "J19", value: 0, price: 250 },
      { name: "J20", value: 0, price: 250 },
      { name: "J21", value: 0, price: 250 },
      { name: "J22", value: 0, price: 250 },
      { name: "J23", value: 0, price: 250 },
      { name: "J24", value: 0, price: 250 },
    ],
    K: [
      { name: "K1", value: 0, price: 250 },
      { name: "K2", value: 0, price: 250 },
      { name: "K3", value: 0, price: 250 },
      { name: "K4", value: 0, price: 250 },
      { name: "K5", value: 0, price: 250 },
      { name: "K6", value: 0, price: 250 },
      { name: "K7", value: 0, price: 250 },
      { name: "K8", value: 0, price: 250 },
      { name: "K9", value: 0, price: 250 },
      { name: "K10", value: 0, price: 250 },
      { name: "K11", value: 0, price: 250 },
      { name: "K12", value: 0, price: 250 },
      { name: "K13", value: 0, price: 250 },
      { name: "K14", value: 0, price: 250 },
      { name: "K15", value: 0, price: 250 },
      { name: "K16", value: 0, price: 250 },
      { name: "K17", value: 0, price: 250 },
      { name: "K18", value: 0, price: 250 },
      { name: "K19", value: 0, price: 250 },
      { name: "K20", value: 0, price: 250 },
    ],
    L: [
      { name: "L1", value: 0 },
      { name: "L2", value: 0 },
      { name: "L3", value: 0 },
      { name: "L4", value: 0 },
      { name: "L5", value: 0 },
      { name: "L6", value: 0 },
      { name: "L7", value: 0 },
      { name: "L8", value: 0 },
      { name: "L9", value: 0 },
      { name: "L10", value: 0 },
      { name: "L11", value: 0 },
      { name: "L12", value: 0 },
      { name: "L13", value: 0 },
      { name: "L14", value: 0 },
      { name: "L15", value: 0 },
      { name: "L16", value: 0 },
      { name: "L17", value: 0 },
      { name: "L18", value: 0 },
      { name: "L19", value: 0 },
      { name: "L20", value: 0 },
    ],
    M: [
      { name: "M1", value: 0 },
      { name: "M2", value: 0 },
      { name: "M3", value: 0 },
      { name: "M4", value: 0 },
      { name: "M5", value: 0 },
      { name: "M6", value: 0 },
      { name: "M7", value: 0 },
      { name: "M8", value: 0 },
      { name: "M9", value: 0 },
      { name: "M10", value: 0 },
      { name: "M11", value: 0 },
      { name: "M12", value: 0 },
      { name: "M13", value: 0 },
      { name: "M14", value: 0 },
      { name: "M15", value: 0 },
      { name: "M16", value: 0 },
      { name: "M17", value: 0 },
      { name: "M18", value: 0 },
      { name: "M19", value: 0 },
      { name: "M20", value: 0 },
    ],
    N: [
      { name: "N1", value: 0 },
      { name: "N2", value: 0 },
      { name: "N3", value: 0 },
      { name: "N4", value: 0 },
      { name: "N5", value: 0 },
      { name: "N6", value: 0 },
      { name: "N7", value: 0 },
      { name: "N8", value: 0 },
      { name: "N9", value: 0 },
      { name: "N10", value: 0 },
      { name: "N11", value: 0 },
      { name: "N12", value: 0 },
      { name: "N13", value: 0 },
      { name: "N14", value: 0 },
      { name: "N15", value: 0 },
      { name: "N16", value: 0 },
      { name: "N17", value: 0 },
      { name: "N18", value: 0 },
      { name: "N19", value: 0 },
      { name: "N20", value: 0 },
    ],
    O: [
      { name: "O1", value: 0 },
      { name: "O2", value: 0 },
      { name: "O3", value: 0 },
      { name: "O4", value: 0 },
      { name: "O5", value: 0 },
      { name: "O6", value: 0 },
      { name: "O7", value: 0 },
      { name: "O8", value: 0 },
      { name: "O9", value: 0 },
      { name: "O10", value: 0 },
      { name: "O11", value: 0 },
      { name: "O12", value: 0 },
      { name: "O13", value: 0 },
      { name: "O14", value: 0 },
      { name: "O15", value: 0 },
      { name: "O16", value: 0 },
      { name: "O17", value: 0 },
      { name: "O18", value: 0 },
      { name: "O19", value: 0 },
      { name: "O20", value: 0 },
    ],
  },
];
let orders = [];
let person = [
  { name: "Admin", email: "test@test.com", password: "test123", number: "" },
];
const { movieData } = require("./movies");

let movies = movieData.map((m, index) => {
  return { ...m, id: index + 1 };
});
const port = process.env.PORT || 2410;
app.listen(port, () => console.log(`Listening on port ${port}!`));

app.get("/movies/:city", (req, res) => {
  let city = req.params.city;
  let { q, lang, format, genre } = req.query;
  let arr = movies;
  if (q)
    arr = arr.filter((f) => f.Title.toLowerCase().includes(q.toLowerCase()));
  if (lang) {
    let arr1 = lang.split(",");
    arr = arr.filter((f) => {
      const movieLanguages = f.Language.split(",");
      return arr1.some((l) => movieLanguages.includes(l));
    });
  }
  if (genre) {
    let arr1 = genre.split(",");
    arr = arr.filter((f) => {
      const movieGenre = f.Genre.split(",");
      return arr1.some((l) => movieGenre.includes(l));
    });
  }
  if (format) {
    let arr1 = format.split(",");
    arr = arr.filter((f) => {
      const movieFormat = f.Format.split(",");
      return arr1.some((l) => movieFormat.includes(l));
    });
  }

  res.send(arr);
});

app.get("/movies/:city/:id", (req, res) => {
  let movie = movies.find((f) => f.id === +req.params.id);
  if (movie) res.send(movie);
  else res.status(404).send("movie not found");
});

app.get("/movie/theater", (req, res) => {
  res.send(theater);
});

app.get("/movie/seates", (req, res) => {
  res.send(seats1);
});

app.post("/login", (req, res) => {
  let { email, password } = req.body;
  let per = person.find((f) => f.email === email && f.password === password);
  if (per) res.send(per);
  else res.status(401).send("not found");
});

app.post("/seat", (req, res) => {
  let body = req.body;
  orders.push(body);
  let updatedSeates = seats1;
  const seatsObj = updatedSeates.find((seat) => seat.time === body.time);
  if (!seatsObj) {
    res.send("seat not found");
  }
  for (const seat of body.tickets) {
    const prefix = seat.charAt(0);
    const seatArray = seatsObj[prefix];

    if (seatArray) {
      const seatToUpdate = seatArray.find((s) => s.name === seat);
      if (seatToUpdate) {
        seatToUpdate.value = 1;
      } else {
        console.log(
          `Seat ${seat} not found for time ${time} in the '${prefix}' array.`
        );
      }
    } else {
      console.log(`Seat ${seat} not found for time ${time}.`);
    }
  }
  seats1 = updatedSeates;
  res.send(body);
});

app.get("/orders", (req, res) => {
  res.send(orders);
});
app.post("/edit", (req, res) => {
  const { email } = req.body;
  const index = person.findIndex((f) => f.email === email);

  if (index >= 0) {
    person[index] = { ...person[index], ...req.body };
    res.send(person[index]);
  } else {
    res.status(400).send("Not found");
  }
});
